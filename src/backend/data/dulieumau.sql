-- ==========================================
-- HỆ THỐNG QUẢN LÝ NHÂN VIÊN
-- Seed Data - Dữ liệu mẫu (UPDATED WITH STATUS + MONTHS 9–12)
-- ==========================================

USE QuanLyNhanVien;

-- ==========================================
-- DỮ LIỆU PHÒNG BAN
-- ==========================================
INSERT INTO PHONGBAN (ma_phong, ten_phong, nam_thanh_lap, trang_thai) VALUES
('PDA', 'Phòng Điều Hành', 2020, 1),
('PKT', 'Phòng Kế Toán', 2020, 1),
('PKD', 'Phòng Kinh Doanh', 2021, 1),
('PIT', 'Phòng Công Nghệ Thông Tin', 2021, 1),
('PNS', 'Phòng Nhân Sự', 2022, 1);

-- ==========================================
-- DỮ LIỆU CHỨC VỤ
-- ==========================================
INSERT INTO CHUCVU (ma_chuc_vu, ten_chuc_vu) VALUES
('T', 'Trưởng phòng'),
('P', 'Phó phòng'),
('N', 'Nhân viên'),
('S', 'Thực tập sinh');

-- ==========================================
-- DỮ LIỆU NHÂN VIÊN
-- ==========================================
INSERT INTO NHANVIEN 
(ma_nv, ten_nv, ngay_sinh, gioi_tinh, ma_phong, ma_chucvu, luong_co_ban, ngay_vao_lam, trang_thai, so_dien_thoai, email) 
VALUES
-- Phòng Điều Hành
('PDAT0001', 'Nguyễn Văn An', '1985-05-15', 'Nam', 'PDA', 'T', 25000000, '2020-01-10', 1, '0912345678', 'PDAT0001@company.com'),
('PDAN0001', 'Trần Thị Bình', '1990-08-20', 'Nữ', 'PDA', 'N', 15000000, '2020-03-15', 1, '0934567890', 'PDAN0001@company.com'),

-- Phòng Kế Toán
('PKTT0001', 'Lê Văn Cường', '1988-03-10', 'Nam', 'PKT', 'T', 20000000, '2020-02-01', 1, '0961112233', 'PKTT0001@company.com'),
('PKTN0001', 'Phạm Thị Dung', '1992-11-25', 'Nữ', 'PKT', 'N', 12000000, '2020-06-01', 1, '0972223344', 'PKTN0001@company.com'),
('PKTN0002', 'Hoàng Văn Em', '1995-07-08', 'Nam', 'PKT', 'N', 11000000, '2021-01-15', 1, '0983334455', 'PKTN0002@company.com'),

-- Phòng Kinh Doanh
('PKDT0001', 'Vũ Thị Phương', '1987-09-30', 'Nữ', 'PKD', 'T', 22000000, '2021-06-01', 1, '0904445566', 'PKDT0001@company.com'),
('PKDN0001', 'Đỗ Văn Giang', '1993-04-12', 'Nam', 'PKD', 'N', 13000000, '2021-08-10', 1, '0915556677', 'PKDN0001@company.com'),
('PKDN0002', 'Bùi Thị Hương', '1994-12-05', 'Nữ', 'PKD', 'N', 13500000, '2021-09-20', 1, '0936667788', 'PKDN0002@company.com'),
('PKDN0003', 'Ngô Văn Inh', '1996-02-28', 'Nam', 'PKD', 'N', 12500000, '2022-03-01', 1, '0947778899', 'PKDN0003@company.com'),

-- Phòng CNTT
('PITT0001', 'Đinh Văn Khánh', '1990-06-18', 'Nam', 'PIT', 'T', 30000000, '2021-06-15', 1, '0968889990', 'PITT0001@company.com'),
('PITP0001', 'Trương Thị Lan', '1991-10-22', 'Nữ', 'PIT', 'P', 25000000, '2021-07-01', 1, '0979990001', 'PITP0001@company.com'),
('PITN0001', 'Lý Văn Minh', '1995-01-14', 'Nam', 'PIT', 'N', 18000000, '2022-01-10', 1, '0980001122', 'PITN0001@company.com'),
('PITN0002', 'Mai Thị Nga', '1996-08-30', 'Nữ', 'PIT', 'N', 17000000, '2022-02-15', 1, '0901112233', 'PITN0002@company.com'),
('PITS0001', 'Phan Văn Oanh', '2000-11-11', 'Nam', 'PIT', 'S', 8000000, '2023-09-01', 1, '0912223344', 'PITS0001@company.com'),

-- Phòng Nhân Sự
('PNST0001', 'Chu Thị Phương', '1989-03-25', 'Nữ', 'PNS', 'T', 18000000, '2022-01-05', 1, '0933334455', 'PNST0001@company.com'),
('PNSN0001', 'Dương Văn Quang', '1994-05-17', 'Nam', 'PNS', 'N', 13000000, '2022-03-20', 1, '0944445566', 'PNSN0001@company.com');


-- ==========================================
-- DỮ LIỆU NGƯỜI DÙNG (bcrypt: "password")
-- ==========================================
INSERT INTO NGUOIDUNG (username, password, vai_tro, ma_nv) VALUES
('admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'Admin', NULL),
('nva', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'Admin', 'PDAT0001'),
('ttb', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'NhanVien', 'PDAN0001'),
('lvc', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'KeToan', 'PKTT0001'),
('dvk', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'Admin', 'PITT0001');

-- ==========================================
-- CHẤM CÔNG 6 THÁNG (07–12/2025)
-- ==========================================

INSERT INTO CHAMCONG (ma_nv, ngay_lam, gio_vao, gio_ra, so_gio, trang_thai) VALUES

-- ============================
-- THÁNG 07 / 2025
-- ============================
('PDAT0001', '2025-07-05', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-07-15', '08:12', '17:20', 8.13, 'Muộn'),

('PDAN0001', '2025-07-06', '08:05', '17:10', 8.08, 'Đúng giờ'),
('PDAN0001', '2025-07-16', '08:30', '17:30', 9, 'Muộn'),

('PKTT0001', '2025-07-07', '08:10', '17:00', 7.83, 'Đúng giờ'),
('PKTT0001', '2025-07-18', '08:40', '17:40', 8.66, 'Muộn'),

('PITN0002', '2025-07-08', '08:00', '16:45', 8.75, 'Đúng giờ'),
('PITN0002', '2025-07-20', '08:25', '17:45', 9.33, 'Muộn'),

('PKDN0003', '2025-07-09', '08:00', '17:05', 8.08, 'Đúng giờ'),
('PKDN0003', '2025-07-19', '08:55', '17:30', 8.58, 'Muộn'),

('PNSN0001', '2025-07-10', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-07-22', '08:35', '17:20', 8.25, 'Muộn'),


-- ============================
-- THÁNG 08 / 2025
-- ============================
('PDAT0001', '2025-08-05', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-08-13', '08:20', '17:30', 8.33, 'Muộn'),

('PDAN0001', '2025-08-06', '08:10', '17:00', 7.83, 'Đúng giờ'),
('PDAN0001', '2025-08-16', '08:32', '17:40', 8.13, 'Muộn'),

('PKTT0001', '2025-08-07', '08:15', '17:05', 7.83, 'Đúng giờ'),
('PKTT0001', '2025-08-17', '08:45', '17:45', 8.66, 'Muộn'),

('PITN0002', '2025-08-08', '08:00', '16:50', 8.83, 'Đúng giờ'),
('PITN0002', '2025-08-20', '08:18', '17:45', 9.45, 'Muộn'),

('PKDN0003', '2025-08-09', '08:05', '17:00', 7.92, 'Đúng giờ'),
('PKDN0003', '2025-08-22', '08:55', '17:35', 8.66, 'Muộn'),

('PNSN0001', '2025-08-10', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-08-21', '08:40', '17:20', 7.67, 'Muộn'),


-- ============================
-- THÁNG 09 / 2025
-- ============================
('PDAT0001', '2025-09-05', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-09-14', '08:25', '17:40', 8.25, 'Muộn'),

('PDAN0001', '2025-09-06', '08:05', '17:00', 7.92, 'Đúng giờ'),
('PDAN0001', '2025-09-16', '08:40', '17:30', 7.83, 'Muộn'),

('PKTT0001', '2025-09-07', '08:10', '17:10', 8, 'Đúng giờ'),
('PKTT0001', '2025-09-18', '08:45', '17:40', 8.58, 'Muộn'),

('PITN0002', '2025-09-08', '08:00', '16:55', 8.91, 'Đúng giờ'),
('PITN0002', '2025-09-20', '08:15', '17:50', 9.58, 'Muộn'),

('PKDN0003', '2025-09-09', '08:05', '17:05', 8, 'Đúng giờ'),
('PKDN0003', '2025-09-22', '08:55', '17:20', 8.42, 'Muộn'),

('PNSN0001', '2025-09-11', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-09-23', '08:50', '17:30', 8.66, 'Muộn'),


-- ============================
-- THÁNG 10 / 2025
-- ============================
('PDAT0001', '2025-10-05', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-10-14', '08:10', '17:25', 8.25, 'Muộn'),

('PDAN0001', '2025-10-07', '08:10', '17:10', 8, 'Đúng giờ'),
('PDAN0001', '2025-10-18', '08:30', '17:40', 8.17, 'Muộn'),

('PKTT0001', '2025-10-08', '08:20', '17:20', 8, 'Đúng giờ'),
('PKTT0001', '2025-10-19', '08:50', '17:45', 8.75, 'Muộn'),

('PITN0002', '2025-10-09', '08:00', '16:50', 8.83, 'Đúng giờ'),
('PITN0002', '2025-10-21', '08:30', '17:55', 9.42, 'Muộn'),

('PKDN0003', '2025-10-10', '08:05', '17:05', 8, 'Đúng giờ'),
('PKDN0003', '2025-10-23', '08:55', '17:40', 8.75, 'Muộn'),

('PNSN0001', '2025-10-11', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-10-24', '08:42', '17:30', 8.8, 'Muộn'),


-- ============================
-- THÁNG 11 / 2025
-- ============================
('PDAT0001', '2025-11-05', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-11-15', '08:12', '17:35', 8.38, 'Muộn'),

('PDAN0001', '2025-11-06', '08:05', '17:00', 7.92, 'Đúng giờ'),
('PDAN0001', '2025-11-17', '08:35', '17:25', 7.83, 'Muộn'),

('PKTT0001', '2025-11-07', '08:10', '17:05', 7.92, 'Đúng giờ'),
('PKTT0001', '2025-11-16', '08:45', '17:50', 9.08, 'Muộn'),

('PITN0002', '2025-11-08', '08:00', '16:55', 8.91, 'Đúng giờ'),
('PITN0002', '2025-11-20', '08:25', '17:45', 9.33, 'Muộn'),

('PKDN0003', '2025-11-09', '08:05', '17:10', 8.08, 'Đúng giờ'),
('PKDN0003', '2025-11-22', '08:50', '17:40', 8.83, 'Muộn'),

('PNSN0001', '2025-11-10', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-11-23', '08:55', '17:25', 8.5, 'Muộn'),


-- ============================
-- THÁNG 12 / 2025
-- ============================
('PDAT0001', '2025-12-10', '08:00', '17:00', 8, 'Đúng giờ'),
('PDAT0001', '2025-12-14', '08:12', '17:25', 8.21, 'Muộn'),

('PDAN0001', '2025-12-11', '08:05', '17:10', 8.08, 'Đúng giờ'),
('PDAN0001', '2025-12-15', '08:32', '17:40', 8.13, 'Muộn'),

('PKTT0001', '2025-12-12', '08:10', '17:20', 8.17, 'Đúng giờ'),
('PKTT0001', '2025-12-16', '08:40', '17:40', 8.66, 'Muộn'),

('PITN0002', '2025-12-13', '08:00', '16:50', 8.83, 'Đúng giờ'),
('PITN0002', '2025-12-17', '08:20', '17:40', 9.33, 'Muộn'),

('PKDN0003', '2025-12-18', '08:05', '17:00', 7.92, 'Đúng giờ'),
('PKDN0003', '2025-12-19', '08:50', '17:30', 8.66, 'Muộn'),

('PNSN0001', '2025-12-20', '08:00', '17:00', 8, 'Đúng giờ'),
('PNSN0001', '2025-12-21', '08:35', '17:15', 8.33, 'Muộn');


-- ==========================================
-- NGHỈ PHÉP
-- ==========================================
INSERT INTO NGHIPHEP (ma_nv, ngay_bat_dau, ngay_ket_thuc, loai_phep, ly_do, trang_thai) VALUES
('PDAN0001', CURDATE() + INTERVAL 5 DAY, CURDATE() + INTERVAL 7 DAY, 'Nghỉ phép năm', 'Về quê', 'Chờ duyệt'),
('PITN0002', CURDATE() + INTERVAL 3 DAY, CURDATE() + INTERVAL 3 DAY, 'Nghỉ ốm', 'Bị cảm', 'Chờ duyệt'),
('PKDN0002', CURDATE() - INTERVAL 10 DAY, CURDATE() - INTERVAL 8 DAY, 'Nghỉ phép năm', 'Du lịch', 'Đã duyệt');

-- ==========================================
-- HỢP ĐỒNG
-- ==========================================
INSERT INTO HOPDONG (ma_nv, loai_hop_dong, ngay_bat_dau, ngay_ket_thuc, file_hop_dong) VALUES
('PDAT0001', 'Vô thời hạn', '2020-01-10', NULL, NULL),
('PKTT0001', 'Vô thời hạn', '2020-02-01', NULL, NULL),
('PITT0001', 'Vô thời hạn', '2021-06-15', NULL, NULL),
('PITN0001', 'Có thời hạn', '2022-01-10', '2024-01-10', NULL),
('PITN0002', 'Có thời hạn', '2022-02-15', '2024-02-15', NULL),
('PITS0001', 'Thử việc', '2023-09-01', '2023-11-01', NULL),
('PNSN0001', 'Có thời hạn', '2022-03-20', CURDATE() + INTERVAL 45 DAY, NULL);

-- ==========================================
-- HOÀN TẤT & THỐNG KÊ
-- ==========================================
SELECT 'Sample data inserted successfully!' AS Status;

SELECT 'Tổng số phòng ban:' AS Info, COUNT(*) AS Count FROM PHONGBAN
UNION ALL
SELECT 'Tổng số nhân viên:', COUNT(*) FROM NHANVIEN
UNION ALL
SELECT 'Tổng số người dùng:', COUNT(*) FROM NGUOIDUNG
UNION ALL
SELECT 'Tổng số bản ghi chấm công:', COUNT(*) FROM CHAMCONG
UNION ALL
SELECT 'Số người đi muộn:', COUNT(*) FROM CHAMCONG WHERE trang_thai = 'Muộn'
UNION ALL
SELECT 'Số người đúng giờ:', COUNT(*) FROM CHAMCONG WHERE trang_thai = 'Đúng giờ';